local -a globout           # Unprocessed output
local -a output            # Processed output
local -a nonselectables    # To be appended, upon making indices global, to ZCMDRLIST_NONSELECTABLE_ELEMENTS
local -a hop_indices       # To be appended, upon making indices global, to ZCMDRLIST_HOP_INDEXES
integer own_LINE_COUNT=0   # Local line count

globout=( "${ZCMDR[current_project]}"/**/*(N) )
size="${#globout[@]}"
globout=( "${globout[@]//$HOME/~}" )

output=( "${CMDR_RED}'Tree (select to open) of ${CMDR_RED_E}${CMDR_YELLOW}${ZCMDR[current_project]:t}${CMDR_YELLOW_E}${CMDR_RED}'${CMDR_RED_E}" )
own_LINE_COUNT+=1
nonselectables+=( "$own_LINE_COUNT" )
hop_indices+=( "$own_LINE_COUNT" )

#
# Create output
#

for (( idx = 1; idx <= size; idx ++ )); do
    reply=( )
    __zcmdr_stdlib_get_std_button "topenA" "" "$selected_editor" "${ZCMDR[current_project]}" "${globout[idx]}" "${globout[idx]}" __zcmdr_action_tree_open
    output+=( "${reply[1]}" )
done

# Add "More+5" and "Less-5" buttons to fetch more and less log entries
reply=( )

reply=( "${output[@]}" )
reply2="$own_LINE_COUNT"
reply3=( "${nonselectables[@]}" )
reply4=( "${hop_indices[@]}" )

# vim:ft=zsh
